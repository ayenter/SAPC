var assert = require('assert')
var mollusk = require('./')

test('single word', function() {
  assert.equal(mollusk.val('Come aboard the USS Bullfrog.'), 1)
  assert.equal(mollusk.val('My toenails are huge at this time.'), 1)
  assert.equal(mollusk.val('say yes to the gentleman with the briefcase?'), 1)

  assert.equal(mollusk.val('The quick brown fox jumped cuz abilities of his.'), 2)
  assert.equal(mollusk.val('It is important to me?'), 2)
  assert.equal(mollusk.val('it\'s ok to be zealous.'), 2)

  assert.equal(mollusk.val('Admire my collection of bullfrogs.'), 3)
  assert.equal(mollusk.val('V. fAsCiNaTiNg?'), 3)
  assert.equal(mollusk.val('yummy food eat into tummy !'), 3)

  assert.equal(mollusk.val('This is amazing.'), 4)
  assert.equal(mollusk.val('Makes me rofl?!'), 4)
  assert.equal(mollusk.val('my reaction go "wow"'), 4)

  assert.equal(mollusk.val('Contains breathtaking things.'), 5)
  assert.equal(mollusk.val('Outstanding derfl deff..'), 5)
  assert.equal(mollusk.val('i am thrilled'), 5)
})

test('multiple words', function() {
  assert.equal(mollusk.val('Come aboard the huge ass USS Bullfrog. It\'s great.'), 1)
  assert.equal(mollusk.val('I am thrilled by the outstanding derfl deff in this product.'), 10)
  assert.equal(mollusk.val('gonna bust a fuck up in this bitch ass piece of shit'), -17) /* forgive me santa */
})

test('phrases', function() {
  assert.equal(mollusk.val('This is not good.'), -2)
  assert.equal(mollusk.val('Seems to be going in the right direction'), 3)
})

test('phrases and words', function() {
  assert.equal(mollusk.val('This is not good, it is great'), 1)
  assert.equal(mollusk.val('Seems to be a piece of shit but going in the right direction'), -1)
})

test('neutral phrase', function() {
  assert.equal(mollusk.val('Like a complete unknown, like a rolling stone?'), 0)
  assert.equal(mollusk.val('seems to be some kind of undesirable jackhole'), -2)
  assert.equal(mollusk.val('I\'ll see to it'), 0)
})

test('negating', function() {
  assert.equal(mollusk.val('I do not like this'), -1)
  assert.equal(mollusk.val('this is not horrible!'), 1.5)
  assert.deepEqual(mollusk('I do not like this').negative, new Set(['not like']))
})

test('absolute value', function() {
  assert.equal(mollusk.val('this is bad but heading in the right direction'), 0)
  assert.equal(mollusk.abs('this is bad but heading in the right direction'), 6)
})

test('isPositive()', function() {
  assert.equal(mollusk.isPositive('seems to be some kind of undesirable jackhole'), false)
  assert.equal(mollusk.isPositive('This is good.'), true)
  assert.equal(mollusk.isPositive('this is bad but heading in the right direction'), false)
})

test('isNegative()', function() {
  assert.equal(mollusk.isNegative('seems to be some kind of undesirable jackhole'), true)
  assert.equal(mollusk.isNegative('This is good.'), false)
  assert.equal(mollusk.isNegative('this is bad but heading in the right direction'), false)
})

test('add words', function() {
  mollusk.lexicon.add({
    positive: {
      '3': {
        words: 'mytest321'
      }
    },
    negative: {
      '1': {
        words: 'mytest123'
      }
    }
  })

  assert.equal(mollusk.val('This is a thing containing myTest321'), 3)
  assert.equal(mollusk.val('This is a thing containing myTest123'), -1)
})

test('add phrases', function() {
  mollusk.lexicon.add({
    positive: {
      '3': {
        phrases: 'super tubular'
      }
    },
    negative: {
      '1': {
        phrases: 'cain\'t do shit'
      }
    }
  })

  assert.equal(mollusk.val('This is a super tubular thing'), 3)
  assert.equal(mollusk.val('I cain\'t do shit with this item'), -1)
})
