try {
  var S = require('benchmark').Suite
  var s = require('sentiment')
} catch (e) {
  return console.error('run "npm install benchmark sentiment"')
}

var m = require('../')
var options = {minSamples: 100}

function runBench(desc, str) {
  console.log(
    '(words) ' + str.split(/\s+/).filter(Boolean).length,
    '(valence) ' + `mollusk: ${m.val(str)}, sentiment: ${s(str).score}`
  )

  S()
  .add(`mollusk - ${desc}`, () => m(str))
  .add(`sentiment - ${desc}`, () => s(str))
  .on('cycle', function(event) {
    console.log(String(event.target));
  })
  .run(options)
  console.log()
}

var long1 = require('fs').readFileSync(__dirname + '/syn', 'utf8')
var long2 = require('fs').readFileSync(__dirname + '/pg', 'utf8')
var long3 = require('fs').readFileSync(__dirname + '/jcal', 'utf8')
var long4 = require('fs').readFileSync(__dirname + '/big', 'utf8')
var short1 = require('fs').readFileSync(__dirname + '/tol', 'utf8')

runBench('l1', long1)
runBench('l2', long2)
runBench('l3', long3)
runBench('l4', long4)
runBench('s1', short1)
